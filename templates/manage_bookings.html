{% extends "base.html" %}

{% block hero %}
<div class="hero-admin">

  {% endblock %}

  {% block content %}
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

  <div class="container">
    <div class="row">
      <div class="col hero-text-position">
        {% if user.is_authenticated %}
        <h1 class="white-text large-text">Manage your bookings and details</h1>
        {% else %}
        <h1 class="white-text large-text">Please login to see this page</h1>

        <div class="d-grid gap-2 col-6 mx-auto">
          <a class="btn navy-btn" role="button" href="{% url 'account_login' %}">Login</a>

        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
<div class="gold-background">
  <div class="row">
    {% if user.is_authenticated%}
    <div class="col-md-6 box-heading-background">
      <h2>Parent/Guardian details</h2>
      {% for parent in parents %}
      {% if parent.user_info.pk == user.pk %}
      <div class="card box-body-background">
        <div class="card-body">
          <h5 class="card-title">{{ parent.parent_fname }}
            {{ parent.parent_surname }}</h5>
          <h6 class="card-subtitle mb-2">{{ parent.contact_no }} /
            {{ parent.parent_email }}</h6>
          <p class="card-text"> <a href="/amend_parent/{{ parent.id }}">
              <button class="navy-btn">Edit your details</button>
          </p></a>
        </div>
      </div>{% endif %} {% endfor %}
    </div>

    <div class="col-md-6 box-heading-background">
      <h2>Child details</h2>
      {% for pupil in pupils %}
      {% if pupil.user_info.pk == user.pk %}
      <div class="col-md-12">
        <div class="card box-body-background">
          <div class="card-body">
            <h5 class="card-title">{{ pupil.first_name_of_pupil }} {{ pupil.surname_of_pupil }}</h5>
            <h6 class="card-subtitle mb-2">Year Group: {{ pupil.year_gp }}</h6>
            <p class="card-text"> <a href="/amend_pupil/{{ pupil.id }}">
                <button class="navy-btn">Edit pupil details</button>
              </a><a  href="#myModal" class="trigger-btn" data-toggle="modal" >
                <button class="navy-btn">Delete</button> 
              </a>
            </p>
          </div>
        </div>
      </div>
      <div id="myModal" class="modal fade">
        <div class="modal-dialog modal-confirm">
          <div class="modal-content">
            <div class="modal-header flex-column">
              <div class="icon-box">
                <i class="fa-solid fa-x"></i>
              </div>						
              <h4 class="modal-title w-100">Are you sure?</h4>	
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
              <p>Do you really want to delete these records? This process cannot be undone.</p>
            </div>
            <div class="modal-footer justify-content-center">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
              <a href="/delete_pupil/{{ pupil.id }}"><button type="button" class="btn btn-danger" >Delete</button></a>
            </div>
          </div>
        </div>
      </div>    
      
      {% endif %} {% endfor %}
    </div>
  </div>

  {% endif %}
</div>
</div>
{% endblock %}
<!-- <script>
document.getElementsByClassName("confirm-delete").on('click', '.confirm-delete', function(){
    return confirm('Are you sure you want to delete this?');
})
</script> -->